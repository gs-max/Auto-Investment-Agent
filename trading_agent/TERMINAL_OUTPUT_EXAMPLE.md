# 📺 终端输出示例

## 已添加的终端打印功能

### 1. **市场数据概况** 📊

```
======================================================================
📊 市场数据概况
======================================================================
总币种数: 145

主要币种价格:
  BTC     :  $   112,586.50
  ETH     :  $     4,234.18
  SOL     :  $       198.45
  AVAX    :  $        42.31
  MATIC   :  $         0.87

BTC 技术指标:
  RSI(14):         48.25
  SMA(20):      $ 110,234.50
  EMA(12):      $ 111,456.78
  24h 涨跌:          0.85%
  波动率:          0.0156
  趋势:            bullish
  趋势强度:         52.30

ETH 技术指标:
  RSI(14):         51.20
  SMA(20):      $   4,189.30
  EMA(12):      $   4,210.45
  24h 涨跌:          1.12%
  波动率:          0.0189
  趋势:            bullish
  趋势强度:         55.80
======================================================================
```

---

### 2. **账户状态** 💼

```
======================================================================
💼 账户状态
======================================================================
账户总价值:   $       999.00 USDC
可用余额:     $       850.00 USDC
已用余额:     $       149.00 USDC

当前持仓: 2 个
----------------------------------------------------------------------
📈 BTC     :
   数量:              0.0050
   入场价:       $   65,000.00
   当前价:       $   65,650.00
   未实现盈亏:   $        3.25
   杠杆:                   3x

📉 ETH     :
   数量:              0.1000
   入场价:       $    3,500.00
   当前价:       $    3,450.00
   未实现盈亏:   $       -5.00
   杠杆:                   2x

======================================================================
```

如果没有持仓：

```
======================================================================
💼 账户状态
======================================================================
账户总价值:   $       999.00 USDC
可用余额:     $       999.00 USDC
已用余额:     $         0.00 USDC

当前持仓: 无
======================================================================
```

---

### 3. **LLM 交易决策** 🤖

**买入决策示例：**

```
======================================================================
🤖 LLM 交易决策
======================================================================
决策:         📈 买入(做多)
币种:         BTC
数量:         0.01
杠杆:         3x
止盈止损:     ✅ 是
止盈比例:     3.0%
止损比例:     1.5%
置信度:       60%

决策理由:
  RSI 48接近中性，24h小幅上涨0.8%显示轻微上升趋势。虽然信号不强烈，
  但系统要求必须交易，使用3x杠杆捕捉短期波动，设置3%止盈和1.5%止损控制风险
======================================================================
```

**卖出决策示例：**

```
======================================================================
🤖 LLM 交易决策
======================================================================
决策:         📉 卖出(做空)
币种:         BTC
数量:         0.001
杠杆:         2x
止盈止损:     ✅ 是
止盈比例:     2.0%
止损比例:     1.0%
置信度:       65%

决策理由:
  价格$112,586是测试网环境，完全正常。RSI 52中性偏上，24h下跌0.5%
  显示弱势。系统要求必须交易，选择做空方向，使用2x杠杆捕捉下跌，
  设置2%止盈1%止损严格控制
======================================================================
```

**平仓决策示例：**

```
======================================================================
🤖 LLM 交易决策
======================================================================
决策:         🔄 平仓
币种:         BTC
数量:         0
杠杆:         1x
止盈止损:     ❌ 否
置信度:       70%

决策理由:
  持仓已盈利1%，虽未达预设止盈目标2%，但RSI上升到55接近超买。
  高频交易策略注重快速锁定利润，选择平仓落袋为安，立即寻找下一个交易机会
======================================================================
```

---

### 4. **交易执行结果** 💰

**成功执行示例（模拟模式）：**

```
======================================================================
💰 交易执行结果
======================================================================
状态:         ✅ 成功
操作:         buy
币种:         BTC
数量:         0.01
杠杆:         3x
止盈止损:     已设置
模式:         🧪 模拟交易
======================================================================
```

**成功执行示例（真实模式）：**

```
======================================================================
💰 交易执行结果
======================================================================
状态:         ✅ 成功
操作:         sell
币种:         ETH
数量:         0.05
杠杆:         2x
止盈止损:     已设置
模式:         🔴 真实交易
======================================================================
```

**失败示例：**

```
======================================================================
💰 交易执行结果
======================================================================
状态:         ❌ 失败
错误:         交易金额超过单笔限制
======================================================================
```

**异常示例：**

```
======================================================================
💰 交易执行结果
======================================================================
状态:         ❌ 异常
错误:         Connection timeout
======================================================================
```

---

## 完整运行示例

运行 `python main_advanced.py --mode once`，你会看到：

```
================================================================================
🚀 高频交易 Agent 启动 - 激进模式
================================================================================
📌 功能: 杠杆 | 止盈止损 | 技术分析 | 高频交易
⚡ 模式: 激进策略 | 60秒检查 | 无币种限制
================================================================================
💰 账户余额: $999.00 USDC
💵 可用资金: $999.00 USDC (100.0%)
🎯 最大杠杆: 10x
🪙 允许币种: 所有币种
⚡ 检查间隔: 60秒
================================================================================
🔴 真实交易模式：请谨慎！
================================================================================

============================================================
🚀 开始新的高级交易周期
============================================================

======================================================================
📊 市场数据概况
======================================================================
总币种数: 145

主要币种价格:
  BTC     :  $   112,586.50
  ETH     :  $     4,234.18
  SOL     :  $       198.45
  AVAX    :  $        42.31
  MATIC   :  $         0.87

BTC 技术指标:
  RSI(14):         48.25
  SMA(20):      $ 110,234.50
  EMA(12):      $ 111,456.78
  24h 涨跌:          0.85%
  波动率:          0.0156
  趋势:            bullish
  趋势强度:         52.30

ETH 技术指标:
  RSI(14):         51.20
  SMA(20):      $   4,189.30
  EMA(12):      $   4,210.45
  24h 涨跌:          1.12%
  波动率:          0.0189
  趋势:            bullish
  趋势强度:         55.80
======================================================================

======================================================================
💼 账户状态
======================================================================
账户总价值:   $       999.00 USDC
可用余额:     $       999.00 USDC
已用余额:     $         0.00 USDC

当前持仓: 无
======================================================================

======================================================================
🤖 LLM 交易决策
======================================================================
决策:         📈 买入(做多)
币种:         BTC
数量:         0.01
杠杆:         3x
止盈止损:     ✅ 是
止盈比例:     3.0%
止损比例:     1.5%
置信度:       60%

决策理由:
  RSI 48接近中性，24h小幅上涨0.8%显示轻微上升趋势。虽然信号不强烈，
  但系统要求必须交易，使用3x杠杆捕捉短期波动，设置3%止盈和1.5%止损控制风险
======================================================================

======================================================================
💰 交易执行结果
======================================================================
状态:         ✅ 成功
操作:         buy
币种:         BTC
数量:         0.01
杠杆:         3x
止盈止损:     已设置
模式:         🧪 模拟交易
======================================================================

============================================================
📊 本轮交易总结
============================================================
✅ 执行成功
决策: buy BTC 0.01
============================================================
```

---

## 如何测试

### 单次运行测试

```bash
cd "/Users/gaoshuo/Desktop/Fintech_Project/Auto Investment Agent/trading_agent"

# 运行一次，查看所有打印输出
python main_advanced.py --mode once
```

### 持续运行测试

```bash
# 持续运行（每60秒一次）
python main_advanced.py

# 或自定义间隔（每30秒一次）
python main_advanced.py --interval 30
```

---

## 日志文件 vs 终端输出

### 终端输出（新增）
- ✅ 市场数据详情
- ✅ 账户状态详情
- ✅ LLM 决策详情
- ✅ 执行结果详情
- 格式化、易读、有颜色图标

### 日志文件（`logs/advanced_trading.log`）
- 📝 所有系统日志
- 📝 错误和警告
- 📝 调试信息
- 纯文本、便于搜索

---

## 输出特点

### 1. **清晰分隔**
每个部分都有明显的分隔线（`=====`）

### 2. **图标标识**
- 📊 市场数据
- 💼 账户状态
- 🤖 LLM 决策
- 💰 执行结果
- 📈 盈利持仓
- 📉 亏损持仓
- ✅ 成功
- ❌ 失败

### 3. **对齐格式**
所有数字右对齐，便于阅读

### 4. **货币格式**
自动添加千位分隔符：`$112,586.50`

### 5. **百分比显示**
- 涨跌幅：`0.85%`
- 置信度：`60%`

---

## 自定义输出

如果你想修改输出格式，编辑以下文件：

1. **市场数据**: `src/advanced_nodes.py` 第21-66行
2. **账户状态**: `src/nodes.py` 第32-57行
3. **LLM 决策**: `src/advanced_nodes.py` 第232-262行
4. **执行结果**: `src/advanced_nodes.py` 第413-435行

---

## 性能影响

终端打印对性能的影响：
- ⚡ 极小（< 10ms）
- 💾 不影响日志文件
- 🔇 可以通过重定向禁用：`python main_advanced.py > /dev/null`

---

**现在运行 Agent，你会在终端看到清晰、详细的实时交易信息！** 📺✨
